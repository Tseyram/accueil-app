<div>
  <div>
    <span class="badge text-bg-success text-center">compte {{ role }}</span>
  </div>
  <div class="row">
    <div class="col col-md-6">
      <div class="container mt-2">
        <div *ngIf="errorMessage">
          {{ errorMessage }}
        </div>
        <div class="card" *ngIf="events">
          <div class="card-header">Evenements</div>
          <div class="card-body">
            <div class="card">
              <div class="card-header">Filtres</div>
              <div class="card-body">
                <div class="nav nav-pills">
                  <!-- BEGIN FILTER BY CATEGORY -->
                  <div class="col-6 text-start">
                    <p>Par type:</p>

                    <select
                      class="form-select"
                      aria-label="Default select example"
                    >
                      <option selected>choix</option>
                      <option value="EVENT_TYPE.CULTE">Culte</option>
                      <option value="2">TPA</option>
                      <option value="3">MHI</option>
                      <option value="4">MFI</option>
                      <option value="5">MJI</option>
                      <option value="6">Corporate(24H,48H...)</option>
                      <option value="7">Séminaire</option>
                      <option value="8">Baptème</option>
                      <option value="9">MCEP</option>
                      <option value="10">MIJ</option>
                      <option value="11">MJI</option>
                      <option value="12">STAR</option>
                      <option value="13">Coktail de Bienvenue</option>
                      <option value="14">Autre</option>
                    </select>
                  </div>
                  <!-- END FILTER BY CATEGORY -->

                  <!-- BEGIN FILTER BY DATE -->
                  <div class="col-6 text-end">
                    <p>Par date:</p>

                    <div
                      class="input-group date form_date"
                      data-date="2014-06-14T05:25:07Z"
                      data-date-format="dd-mm-yyyy"
                      data-link-field="dtp_input1"
                    >
                      <input type="date" class="form-control" placeholder="" />
                      <span class="input-group-addon bg-blue"
                        >A partir de<i class="fa fa-th"></i
                      ></span>
                    </div>
                    <input type="hidden" id="dtp_input1" value="" />

                    <div
                      class="input-group date form_date"
                      data-date="2014-06-14T05:25:07Z"
                      data-date-format="dd-mm-yyyy"
                      data-link-field="dtp_input2"
                    >
                      <input type="date" class="form-control" placeholder="" />
                      <span class="input-group-addon bg-blue"
                        >Jusqu'à<i class="fa fa-th"></i
                      ></span>
                    </div>
                    <button
                      class="btn btn-outline-info mt-1"
                      (submit)="handleSearchEvents()"
                    >
                      Filtrer
                    </button>
                    <input type="hidden" id="dtp_input2" value="" />
                  </div>
                  <!-- END FILTER BY DATE -->
                </div>
              </div>
            </div>

            <!-- END FILTERS -->
            <table
              class="table table-hover"
              aria-label="evenements en présentiel"
            >
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Evenement</th>
                  <th>Debut</th>
                  <th>Fin</th>
                  <th>Conducteur</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody *ngIf="isFiltred == false">
                <tr *ngFor="let e of events.eventsDTOs">
                  <td>{{ e.date | date : "mediumDate" }}</td>
                  <td>{{ e.name }}</td>
                  <td>{{ e.debut }}</td>
                  <td>{{ e.fin }}</td>
                  <td>{{ e.conducteur }}</td>
                  <td>
                    <ul class="nav nav pills">
                      <li>
                        <a
                          (click)="handleShow(e)"
                          class="btn btn-info ms-1 mt-1"
                        >
                          <i class="bi bi-eye"></i>
                        </a>
                      </li>
                      <li *ngIf="role !== 'BERGER'">
                        <a
                          (click)="handleDeleteEvent(e)"
                          class="btn btn-danger ms-1 mt-1"
                        >
                          <i class="bi bi-trash"></i>
                        </a>
                      </li>
                      <li *ngIf="role !== 'BERGER'">
                        <a
                          (click)="handleUpdate(e)"
                          class="btn btn-info ms-1 mt-1"
                        >
                          <i class="bi bi-arrow-clockwise"></i>
                        </a>
                      </li>
                    </ul>
                  </td>
                </tr>
              </tbody>
              <tbody *ngIf="isFiltred == true">
                <tr *ngFor="let e of filtredEvents">
                  <td>{{ e.date | date : "mediumDate" }}</td>
                  <td>{{ e.name }}</td>
                  <td>{{ e.debut }}</td>
                  <td>{{ e.fin }}</td>
                  <td>{{ e.conducteur }}</td>
                  <td>
                    <ul class="nav nav pills">
                      <li *ngIf="role !== 'BERGER'">
                        <a
                          (click)="handleDeleteEvent(e)"
                          class="btn btn-danger ms-1 mt-1"
                        >
                          <i class="bi bi-trash"></i>
                        </a>
                      </li>
                      <li *ngIf="role !== 'BERGER'">
                        <a
                          (click)="handleUpdate(e)"
                          class="btn btn-info ms-1 mt-1"
                        >
                          <i class="bi bi-arrow-clockwise"></i>
                        </a>
                      </li>
                    </ul>
                  </td>
                </tr>
              </tbody>
            </table>
            <ul class="nav nav-pills">
              <li
                *ngFor="
                  let item of [].constructor(events.totalPages);
                  let page = index
                "
              >
                <a
                  [ngClass]="
                    page == currentPage ? 'btn-info' : 'btn-outline-info btn'
                  "
                  (click)="gotToPage(page)"
                  class="btn ms-1 mt-1"
                  >{{ page }}</a
                >
              </li>
            </ul>
            <div class="col col-md-6 text-center mt-2">
              <button class="btn btn-primary" type="button" routerLink="/add">
                +
              </button>
              <label for=""> Ajouter un évènement</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ng-container *ngIf="eventToShow as eS">
      <div class="col col-md-3" *ngIf="show == true">
        <div class="card">
          <div class="card-header">
            {{ eS.name }} du {{ eS.date | date : "dd-MM-yyyy" }}
            <button class="btn btn-danger text-end" (click)="closeShow()">
              x
            </button>
          </div>
          <div class="card-body">
            <div>
              <span class="badge rounded-pill text-bg-info">Evenement</span>
              <label class="">{{ eS.name }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Date</span>
              <label class="">{{ eS.date | date : "longDate" }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Début</span>
              <label class="">{{ eS.debut }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Fin</span>
              <label class="">{{ eS.fin }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Conducteur</span>
              <label class="">{{ eS.conducteur }} </label>
            </div>

            <div>
              <span class="badge rounded-pill text-bg-info">Hommes</span>
              <label class="">{{ eS.nombreHommes }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Femmes</span>
              <label class="">{{ eS.nombreFemmes }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Enfants</span>
              <label class="">{{ eS.nombreEnfants }} </label>
            </div>
            <div>
              <span class="badge rounded-pill text-bg-info">Connexions</span>
              <label class="">{{ eS.connexions }} </label>
            </div>
            <div class="nav nav-pills">
              <button class="btn btn-danger">Supprimer</button>
              <button class="btn btn-info">Modifier</button>
            </div>

            <!-- <label for="">Nombre d'hommes: {{ eS. }} </label>
            <label for="">Nombre de femmes: {{ e.name }} </label>
            <label for="">Nombre d'enfants: {{ e.name }} </label>
            <label for="">Nombre de connexions: {{ e.name }} </label> -->
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
